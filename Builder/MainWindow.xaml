<Controls:MetroWindow x:Class="Builder.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
        xmlns:conv="clr-namespace:Builder.View.Converter"
        xmlns:view="clr-namespace:Builder.View"
        xmlns:local="clr-namespace:Builder"
        mc:Ignorable="d"
        Title="SAP Emulator" Height="775" Width="1000">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Style/Icons.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <conv:NegateBooleanConverter x:Key="boolinverter"/>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Background="White">
        
        <!-- Test builder view -->
        <view:TestBuilderView x:Name="TestBuilderView" Grid.Column="0" IsEnabled="{Binding IsRunningEmulator, Converter={StaticResource boolinverter}}" >
            <view:TestBuilderView.Style>
                <Style TargetType="view:TestBuilderView">
                    <Setter Property="Visibility" Value="Visible"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsRunningEmulator}" Value="true">
                            <Setter Property="Visibility" Value="Hidden" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </view:TestBuilderView.Style>
        </view:TestBuilderView>

        <!-- Test builder buttons -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="40" IsEnabled="{Binding IsRunningEmulator, Converter={StaticResource boolinverter}}">
            <StackPanel.Style>
                <Style TargetType="StackPanel">
                    <Setter Property="Visibility" Value="Visible"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsRunningEmulator}" Value="true">
                            <Setter Property="Visibility" Value="Hidden" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </StackPanel.Style>
            <Button x:Name="AddRowButton" Click="AddRowButton_Click" Background="Transparent" Margin="2.5,0,2.5,0" Width="30" Height="30" Padding="5" Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" BorderThickness="0" >
                <Path Data="{StaticResource ico_add}" Stretch="Fill" Fill="LightSeaGreen"/>
            </Button>
            <Button x:Name="RemoveRowButton" Click="RemoveRowButton_Click" Background="Transparent" Margin="2.5,0,2.5,0" Width="30" Height="30" Padding="6" Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" BorderThickness="0" >
                <Path Data="{StaticResource ico_remove}" Stretch="Fill" Fill="IndianRed" />
            </Button>
            <StackPanel Orientation="Horizontal" Margin="5,0,5,0">
                <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />
            </StackPanel>
            <Button x:Name="PlayButton" Click="PlayButton_Click" Background="LightGray" Margin="2.5,0,2.5,0" Width="30" Height="30" Padding="6" Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" BorderThickness="0">
                <Path Data="{StaticResource ico_play}" Stretch="Fill" Fill="Green"/>
            </Button>
            <Button x:Name="OpenButton" Click="OpenButton_Click" Background="LightGray" Margin="2.5,0,2.5,0" Width="30" Height="30" Padding="5" Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" BorderThickness="0">
                <Path Data="{StaticResource ico_file}" Stretch="Fill" Fill="Yellow"/>
            </Button>
            <Button x:Name="SaveButton" Click="SaveButton_Click" Background="LightGray" Margin="2.5,0,2.5,0" Width="30" Height="30" Padding="5" Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" BorderThickness="0">
                <Path Data="{StaticResource ico_save}" Stretch="Fill" Fill="MediumPurple"/>
            </Button>
            <Button x:Name="SettingsButton" Background="LightGray" Margin="2.5,0,2.5,0" Width="30" Height="30" Padding="5" Style="{DynamicResource MahApps.Metro.Styles.MetroCircleButtonStyle}" BorderThickness="0">
                <Path Data="{StaticResource ico_settings}" Stretch="Fill" Fill="Gray"/>
            </Button>
        </StackPanel>
        
        <!-- Emulator view -->
        <view:EmulatorView x:Name="EmulatorView" Grid.Column="0">
            <view:EmulatorView.Style>
                <Style TargetType="view:EmulatorView">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsRunningEmulator}" Value="true">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </view:EmulatorView.Style>
        </view:EmulatorView>
    </Grid>
</Controls:MetroWindow>
